{
  "timestamp": "2025-01-10T08:45:00Z",
  "query": "List all tables in public schema",
  "total_tables": 99,
  "expected_tables_status": {
    "instruction_sets": "MISSING",
    "stages": "MISSING",
    "user_threads": "MISSING",
    "sub_threads": "MISSING",
    "ai_responses": "MISSING",
    "ddsa_stage_config": "EXISTS",
    "ddsa_stage_execution_log": "EXISTS",
    "ddsa_stage_progress": "EXISTS",
    "chat_threads": "EXISTS",
    "chat_messages": "EXISTS",
    "dds_state": "EXISTS",
    "ddsa_audit_logs": "EXISTS"
  },
  "schema_mismatch": {
    "code_references": [
      "stages table (app/api/ai/call/route.ts:51)",
      "user_threads table (database/migrations/20250122_stage_module_admin.sql)",
      "sub_threads table (database/migrations/20250122_stage_module_admin.sql)",
      "ai_responses table (app/api/ai/call/route.ts:157)"
    ],
    "actual_database": [
      "ddsa_stage_config (exists)",
      "chat_threads (exists)",
      "No user_threads/sub_threads separation",
      "No ai_responses table"
    ],
    "conclusion": "Code references tables that don't exist. Database uses different schema (ddsa_stage_config instead of stages, chat_threads instead of user_threads/sub_threads)"
  },
  "tables_found": [
    "Challenges",
    "action_feedback",
    "actions",
    "ad_allocations",
    "ad_events",
    "ad_placements",
    "admin_suggestions",
    "ads",
    "assistant_messages",
    "assistant_rules",
    "assistants",
    "audit_logs",
    "blog_media_attachments",
    "blog_posts",
    "chat_admin_config",
    "chat_analytics",
    "chat_assistants",
    "chat_calendar_events",
    "chat_consolidated_history",
    "chat_consolidation_log",
    "chat_context_summary",
    "chat_credit_transactions",
    "chat_credit_wallets",
    "chat_images_library",
    "chat_llm_providers",
    "chat_mcq_questions",
    "chat_messages",
    "chat_model_pricing",
    "chat_notifications_outbox",
    "chat_plan_milestones",
    "chat_plan_progress",
    "chat_plan_settings",
    "chat_plan_tasks",
    "chat_plans",
    "chat_policy_rules",
    "chat_provider_api_keys",
    "chat_quotes_library",
    "chat_routing_rules",
    "chat_sessions",
    "chat_slot_ledger",
    "chat_solution_generation",
    "chat_stage_transitions",
    "chat_threads",
    "chat_usage_accounting",
    "chat_usage_accounting_v2",
    "chat_user_patterns",
    "chat_user_profiles",
    "chat_user_responses",
    "chat_user_schedules",
    "chat_validation_log",
    "cleanup_backup_log",
    "company_permissions_catalog",
    "conversation_sessions",
    "conversation_summaries",
    "countries",
    "credit_transactions",
    "credits",
    "data_deletion_audit",
    "dds_state",
    "ddsa_assumptions",
    "ddsa_audit_logs",
    "ddsa_final_plan",
    "ddsa_hypotheses",
    "ddsa_mdem",
    "ddsa_sevend_scores",
    "ddsa_stage_config",
    "ddsa_stage_dependencies",
    "ddsa_stage_execution_log",
    "ddsa_stage_progress",
    "ddsa_stakeholders",
    "ddsa_workboard_claims",
    "employee_applications",
    "feedback",
    "global_pricing",
    "invitations_backup",
    "memories",
    "memory_metrics",
    "memory_vectors",
    "module_invocations",
    "operator_actions",
    "organizations",
    "pending_credit_deductions",
    "plan_types",
    "pricing_modes",
    "problems",
    "profiles",
    "requests",
    "stories",
    "super_admin_audit_logs",
    "super_admins",
    "supported_persons",
    "temporary_signups",
    "testimonials",
    "thread_persistence_queue",
    "threads",
    "token_usage_audit",
    "transactions",
    "user_analytics",
    "user_credits_balance",
    "user_flow_progress",
    "user_goals",
    "user_roles",
    "user_sessions",
    "user_tenants",
    "users"
  ]
}

